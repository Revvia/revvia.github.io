var fn=Object.defineProperty,mn=Object.defineProperties;var bn=Object.getOwnPropertyDescriptors;var qt=Object.getOwnPropertySymbols;var vn=Object.prototype.hasOwnProperty,gn=Object.prototype.propertyIsEnumerable;var Yt=(e,t,n)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t)=>{for(var n in t||(t={}))vn.call(t,n)&&Yt(e,n,t[n]);if(qt)for(var n of qt(t))gn.call(t,n)&&Yt(e,n,t[n]);return e},Et=(e,t)=>mn(e,bn(t));var S=(e,t,n)=>new Promise((r,o)=>{var i=c=>{try{a(n.next(c))}catch(l){o(l)}},s=c=>{try{a(n.throw(c))}catch(l){o(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((n=n.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const L=()=>{const e=new WeakMap;return(n,r)=>e.get(n)||r&&e.set(n,r).get(n)},ge=L(),we=L(),wn=L(),V=new Map,Nt=e=>V.get(e),at=L(),yn=L(),Sn=L(),lt=L(),tt=(e,t,n)=>{const r=Sn(e,{});let o=r[t];if(!o){let i=e[t];const s=Object.getOwnPropertyDescriptor(e,t)||{};o=[],r[t]=o,Object.defineProperty(e,t,{get:s.get||(()=>i),set:function(a){var l;const c=i;if(a!==c){(l=s.set)==null||l.call(s,a),i=a;for(const u of o)u(this,a,c)}}})}o.push(n)},En={},Dt=L(),ye=L(),xn=L(),Se=(e,t,...n)=>{Jt(En,e,t,...n),Jt(Dt(t)||{},e,...n)},Jt=(e,t,...n)=>{for(const r of e[t]||[])e[t].includes(r)&&r(...n)},rt=e=>{const t=[e];let n;for(;n=t.shift();){for(const r of ye(n,[]))r();for(const r of n.childNodes)t.push(r)}},xt=(e,t,n,r)=>{const o=Dt(e,{});o[n]?o[n].push(r):o[n]=[r],ye(t,[]).push(()=>{const s=Dt(e);s!=null&&s[n]&&(s[n]=s[n].filter(a=>a!==r))})},Kt=(e,t,n)=>{const r=xn(t,{});r[n]||(r[n]=1,tt(t,n,(o,i,s)=>{Se(`set:${n}`,o,e,i,s)}))},Cn=(e,t,n,r={})=>{e.dispatchEvent(new CustomEvent(t,st({bubbles:!0,cancelable:!1,composed:!0,detail:n},r)))},Ee=e=>e.entries?e.entries():Object.entries(e),On=e=>JSON.stringify(e),xe=e=>{const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}},bt=e=>e.replace(new RegExp("-(\\p{Ll})","gu"),t=>t[1].toUpperCase()),vt=e=>e.replace(new RegExp("\\p{Lu}","gu"),t=>`-${t[0]}`.toLowerCase()),kn=e=>vt(e.replace(new RegExp("^\\p{Lu}","gu"),t=>t.toLowerCase())),Ce=e=>`${e!=null?e:""}`,Oe=e=>typeof e=="string",Q=(e,t)=>e.getAttribute(t),Pn=e=>{var n,r;const t=V.get(e);return(r=(n=t==null?void 0:t.shadowRoot)!=null?n:t)!=null?r:null},$=(e,t,n)=>{n===!0&&(n=""),Oe(n)?e.setAttribute(t,n):e.removeAttribute(t)},et=(e,t)=>[...new Set([...e,...t])],ot=(e,t)=>typeof e[t]=="function"?e[t].bind(e):e[t],k=document,T=window,gt=e=>e.cloneNode(!0),jt=e=>k.createElement(e),In=e=>k.createTextNode(e),Tn=e=>k.createComment(e),ke=()=>k.createDocumentFragment(),Nn=e=>{const t=jt("style");return t.append(In(e)),t},Pe=()=>jt("template"),Ie=(e,t)=>k.createTreeWalker(e,t),Dn=e=>{const t=k.implementation.createHTMLDocument(""),n=t.createElement("style");return n.textContent=e,t.body.append(n),n.sheet.cssRules||[]};function q(e,t,n,r,o){xt(e,t,"set:",n);for(const i of r){const s=`set:${i}`;i in o?(Kt(e,o,i),xt(o,t,s,n)):(Kt(e,e,i),tt(e,i,(a,c,l)=>{var u;(u=a.onChange)==null||u.call(a,i,c,l)}),xt(e,t,s,n))}}const R=e=>{let t=lt(e);if(e){let n=e.parentNode;for(;!t&&n;)t=lt(n),n=n.parentNode}return t||(t={},lt(k.body,t)),t},_t=(e,t)=>{const n=Object.create(e);return lt(t,n),n},H=(e,t)=>new Proxy(e,{get:(n,r)=>r in t?ot(t,r):ot(n,r)});let D="",O=0,p=0;const Ln={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v"},An={"-":e=>t=>-e(t),"!":e=>t=>!e(t),"~":e=>t=>~e(t),"+":e=>t=>+e(t)},Mn={"||":[1,(e,t)=>n=>e(n)||t(n)],"&&":[2,(e,t)=>n=>e(n)&&t(n)],"|":[3,(e,t)=>n=>e(n)|t(n)],"^":[4,(e,t)=>n=>e(n)^t(n)],"&":[5,(e,t)=>n=>e(n)&t(n)],"==":[6,(e,t)=>n=>e(n)==t(n)],"!=":[6,(e,t)=>n=>e(n)!=t(n)],"===":[6,(e,t)=>n=>e(n)===t(n)],"!==":[6,(e,t)=>n=>e(n)!==t(n)],"<":[7,(e,t)=>n=>e(n)<t(n)],">":[7,(e,t)=>n=>e(n)>t(n)],"<=":[7,(e,t)=>n=>e(n)<=t(n)],">=":[7,(e,t)=>n=>e(n)>=t(n)],"<<":[8,(e,t)=>n=>e(n)<<t(n)],">>":[8,(e,t)=>n=>e(n)>>t(n)],">>>":[8,(e,t)=>n=>e(n)>>>t(n)],"+":[9,(e,t)=>n=>e(n)+t(n)],"-":[9,(e,t)=>n=>e(n)-t(n)],"*":[10,(e,t)=>n=>e(n)*t(n)],"/":[10,(e,t)=>n=>e(n)/t(n)],"%":[10,(e,t)=>n=>e(n)%t(n)]},Xt={true:()=>!0,false:()=>!1,null:()=>null},Y=e=>{D=e,O=0,g(0);let t=[()=>{},[]];try{t=Ut()||E()}catch(n){}return t},g=(e=1)=>{O+=e,p=D.charCodeAt(O)},M=()=>D.charAt(O),nt=e=>e>=48&&e<=57,ft=e=>e>=65&&e<=90||e>=97&&e<=122||e>=128||e===36||e===95,E=()=>{const e=`Parse error at index ${O}: ${D}`;throw console.error(e),new Error(e)},N=()=>{for(;p===32||p===9||p===10||p===13;)g()},Ut=()=>{const e=Rn();return N(),e},Zt=()=>{N();let e=D.substr(O,3),t=3,n;for(;t>0;){if(n=Mn[e],n){g(t);break}e=e.substr(0,--t)}return n},Rn=()=>{let e,t,n,r,o,i,s;if(o=ut(),!o||(t=Zt(),!t))return o;for(i=ut()||E(),r=[o,t,i],s=()=>{let a=r.pop(),c=r.pop(),l=r.pop();r.push([c[1](l[0],a[0]),et(l[1],a[1])])};n=Zt();){for(;r.length>2&&n[0]<=r[r.length-2][0];)s();e=ut()||E(),r.push(n,e)}for(;r.length>1;)s();return r[0]},ut=()=>{let e;if(N(),nt(p)||p===46)return Bn();if(p===39||p===34)e=jn();else{const t=An[M()];if(t){g();const r=ut()||E();return[t(r[0]),r[1]]}ft(p)||E();const n=Te();e=Xt[n]?[Xt[n],[]]:[r=>ot(r,n),[n]]}return $n(e)},$n=e=>{for(N();p===46||p===91||p===40||p===63;){let t,n,r=[],o=e;if(p===63&&(g(),N(),p!==46&&E(),t=!0),p===91){g();const i=Ut()||E();n=(s,a)=>ot(s,i[0](a)),r=i[1],p!==93&&E(),g()}else if(p===40){g();const i=_n();n=(s,a)=>s(...i.map(c=>c[0](a))),r=i.reduce((s,a)=>et(s,a[1]),r)}else if(p===46){g(),N();const i=Te();n=s=>ot(s,i)}else E();e=t?[i=>{const s=o[0](i);return s===void 0?void 0:n(s,i)},et(o[1],r)]:[i=>n(o[0](i),i),et(o[1],r)],N()}return e},Bn=()=>{let e="";for(;nt(p);)e+=M(),g();if(p===46)for(e+=".",g();nt(p);)e+=M(),g();if(p===101||p===69){e+=M(),g(),(p===43||p===45)&&(e+=M(),g());let n=!0;for(;nt(p);)e+=M(),g(),n=!1;n&&E()}(ft(p)||p===46||e===".")&&E();const t=parseFloat(e);return[()=>t,[]]},jn=()=>{let e="";const t=p;for(g();O<D.length&&p!==t;){if(p===92){g();const n=M();e+=Ln[n]||n}else e+=M();g()}return O>=D.length&&E(),g(),[()=>e,[]]},Te=()=>{let e=O;for(ft(p)?g():E();O<D.length&&!(!ft(p)&&!nt(p));)g();return D.slice(e,O)},_n=()=>{const e=[];for(N();p!==41;)O>=D.length&&E(),e.push(Ut()||E()),N(),p===44?(g(),N()):p!==41&&E();return g(),e},Ne=e=>{const t=e.split(/{{(.*?)}}/);if(t.length<2)return null;const n=[];let r=!1,o=[];for(const i of t){if(r){const s=Y(i);n.push(s[0]),o=et(o,s[1])}else n.push(i);r=!r}return[n,o]},De=e=>e?[t=>e[0].map(n=>Ce(n!=null&&n.call?n(t):n)).join(""),e[1]]:null,Un=xe(e=>{const t=Ne(e),n=t==null?void 0:t[0];return(n==null?void 0:n.length)===3&&n[0]===""&&n[2]===""?[r=>{const o=n[1](r);return typeof o=="boolean"?o:Ce(o)},t[1]]:De(t)}),Hn=xe(e=>De(Ne(e))),Vn=(e,t,n,r)=>{const o=Un(n);if(o){const i=R(t),s=a=>{$(t,r,o[0](H(a,i)))};q(e,t,s,o[1],i),s(e)}},Gn={window:()=>{},document:()=>{},stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:(e,t)=>e.target!==t,outside:(e,t)=>t.contains(e.target),ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>e.button!==0,middle:e=>e.button!==1,right:e=>e.button!==2,exact:(e,t,n)=>["ctrl","shift","alt","meta"].some(r=>e[`${r}Key`]&&!n.has(r))},Wn=(e,t,n,r)=>{const[o,...i]=bt(r.slice(1)).split("."),s=Object.create(R(t)),a=Y(n),c=h=>{s.$event=h,a[0](H(e,s))},l={},u=new Set(i);let m=t;for(const h of["passive","capture","once"])u.has(h)&&(l[h]=!0);u.has("window")&&(m=T),(u.has("document")||u.has("outside"))&&(m=k),m.addEventListener(o,h=>{i.some(d=>(Gn[d]||(f=>kn(f.key)!==(d.match(/^code-\d+$/)?String.fromCodePoint(+d.split("-")[1]):d)))(h,t,u))||c(h)},l),$(t,r)},Fn=(e,t,n,r)=>{e[bt(n)]=t,$(t,r)},zn=(e,t,n,r)=>{const o=Y(n),i=bt(r.slice(1)),s=R(t),a=c=>{const l=o[0](H(c,s));t[i]=l};q(e,t,a,o[1],s),a(e),$(t,r)},qn=(e,t,n,r)=>{let o="key",i="value";const s=r.match(/^\s*(?:(?:(\S+)\s*,\s*)?(\S+)\s+of\s+)?(\S+)\s*$/);s&&(o=s[1]||o,i=s[2]||i,r=s[3]);const a=Y(r),c=R(t);let l=new Map;const u=m=>{const h=a[0](H(m,c))||[];let d=l;l=new Map;let f=t;for(const[b,_]of Ee(h)){let x=d.get(b);if(d.delete(b),x===f.nextSibling){const A=R(x);A[i]=_}else{x&&(rt(x),x.remove()),x=gt(n);const A=_t(c,x);A[o]=b,A[i]=_,Gt(x,m),f.after(x)}f=x,l.set(b,f)}for(const b of d.values())rt(b),b.remove()};q(e,t,u,a[1],c),u(e)},Yn=(e,t,n,r)=>{const o=Y(r),i=R(t);let s=null;const a=c=>{o[0](H(c,i))?s||(s=gt(n),_t(i,s),Gt(s,c),t.after(s)):s&&(rt(s),s.remove(),s=null)};q(e,t,a,o[1],i),a(e)},Jn=(e,t,n,r)=>{let o="index";const i=r.match(/^(\S+)\s+as\s+(\S+)$/);i&&(r=i[1],o=i[2]);const s=Y(r),a=R(t);let c=[];const l=u=>{let m=+s[0](H(u,a));for(;c.length>m;){const f=c.pop();rt(f),f.remove()}let h=c.length+1,d=c[h-1]||t;for(;c.length<m;){let f=gt(n);const b=_t(a,f);b[o]=h++,Gt(f,u),c.push(f),d.after(f),d=f}};q(e,t,l,s[1],a),l(e)},Le=0,Ae=1,Ht=[{"*for":qn,"*if":Yn,"*repeat":Jn},{"":Vn,"@":Wn,"#ref":Fn,".":zn}],Kn=(e,t)=>Ht[e.charAt(0)==="*"?Le:Ae][e]=t;function Xn(e,t){if(t.nodeType===1)for(const n of[...t.attributes]){const r=n.nodeName,o=r.charAt(0),i=Ht[Ae],s=i[r]||i[o]||i[""];s==null||s(e,t,n.nodeValue||"",r)}}const Zn=(e,t,n)=>{const r=n.attributes;if(n.nodeType===1&&r){let o;for(const[i,s]of Ee(Ht[Le])){const a=r.getNamedItem(i);if(a){if(o)throw new Error(`${o[0]} breaks ${i}`);o=[i,s,a.nodeValue||""]}}if(o){const i=Tn(`${o[0]}=${On(o[2])}`);return n.before(i),t.previousNode(),n.remove(),$(n,o[0]),o[1](e,i,n,o[2],o[0]),1}}};function Qn(e,t){if(t.nodeType===3){const n=Hn(t.textContent||"");if(n){const r=R(t),o=i=>{t.nodeValue=n[0](H(i,r))};return q(e,t,o,n[1],r),o(e),1}}}const Vt=(e,t)=>{const n=Ie(e,133);let r;for(;r=n.nextNode();)r.nodeName==="TEMPLATE"&&Vt(r.content,t),Zn(t,n,r)||Qn(t,r)||Xn(t,r)},Gt=(e,t)=>{const n=ke();n.append(e),Vt(n,t)},Qt="DOMContentLoaded",tr=(e,t,n)=>{const r=e.ownerDocument,o=()=>{let i=e;do if(i.nextSibling)return!0;while(i=i.parentNode);return!1};if(t===e||r.readyState!=="loading"||o())n();else{const i=nr(r,e,s=>{(s||o())&&(i(),n())})}},er=e=>{let t=e;do e=t,t=e.parentNode;while(t&&t.nodeType===1);return e},nr=(e,t,n)=>{const r=()=>{n(!0)};e.addEventListener(Qt,r);const o=er(t),i=yn(o,{s:new Set}),s=()=>{n(!1)};return i.s.add(s),i.o||(i.o=new MutationObserver(()=>{for(const a of[...i.s])a()}),i.o.observe(o,{childList:!0,subtree:!0})),()=>{i.s.delete(s),e.removeEventListener(Qt,r),i.s.size||(i.o.disconnect(),delete i.o)}};class rr extends HTMLElement{constructor(){super()}attributeChangedCallback(t,n,r){const o=bt(t),i=at(this);i&&this.E(i,o,r)}connectedCallback(){var s;const t=this.constructor,n=new(we(t)),r=ge(t),o=r.useShadow,i=o?this.shadowRoot||this.attachShadow({mode:"open"}):this;at(this,n),V.set(n,this),wn(n,r),this.classList.add(r.className),this.$(r,n),(s=n.onInit)==null||s.call(n),tr(this,i,()=>{var c,l;(c=n.onParse)==null||c.call(n);const a=Pe();a.innerHTML=r.template,Vt(a.content,n),o||this.L(),r.style&&i.append(Nn(r.style)),i.append(a.content),(l=n.onViewInit)==null||l.call(n)})}disconnectedCallback(){var n;const t=at(this);(n=t==null?void 0:t.onDestroy)==null||n.call(t),rt(this),V.delete(t),this.L()}$(t,n){for(const r of t.prop||[]){const o=(s,a)=>{const c=at(s);this.E(c,r,a)};tt(this,r,o),o(this,this[r]);const i=(s,a)=>{const c=V.get(s);c&&(c[r]=a)};tt(n,r,i),i(n,n[r])}for(const r of t.attr||[]){const o=vt(r);this.E(n,r,Q(this,o)),(t.prop||[]).includes(r)||tt(n,r,(s,a)=>{const c=V.get(s);c&&$(c,o,a)})}}E(t,n,r){var i;const o=t[n];t[n]=r,(i=t.onChange)==null||i.call(t,n,o,r)}L(){this.innerHTML="",this.shadowRoot&&(this.shadowRoot.innerHTML="")}}let mt=new Map,Me=()=>{(e=>mt=T[e]||(T[e]=mt))("__fudgel"),Me=()=>{}};const or=()=>{const e=mt.get("n")||0;return mt.set("n",e+1),e},B=(e,t)=>n=>{I(e,t,n)},te=customElements,I=(e,t,n)=>{Me();const r=`fudgel-${or()}`,o=ir(t.style||"",e,r,t.useShadow),i=Et(st({},t),{className:r,style:o});class s extends rr{}s.observedAttributes=(i.attr||[]).map(vt),ge(s,i),we(s,n||class{});const a=Pe();a.innerHTML=i.template,Re(a,r),i.template=a.innerHTML,Se("component",s,s,i),te.get(e)||te.define(e,s)},Re=(e,t)=>{const n=Ie(e.content,1);let r;for(;r=n.nextNode();)r.nodeName==="TEMPLATE"&&Re(r,t),r.classList.add(t)},ir=(e,t,n,r)=>{const o=(s,a)=>{s[Ct]&&(s[Ct]=s[Ct].split(",").map(c=>i(c,a)).join(","),a="");for(const c of s.cssRules||[])o(c,a);return s.cssText},i=(s,a)=>{s=s.trim();const c=m=>`${m}.${n}`,l=(m,h)=>m.replace(/:host/,h),u=l(s,"")===s;return r?(u||s.includes(" "))&&(s=c(s)):(s=l(s,a),u&&(s=`${a} ${c(s)}`)),s};return[...Dn(e)].map(s=>o(s,t)).join("")},Ct="selectorText",ee=new Map,Z=[],w=e=>{if(Z.includes(e))throw Z.push(e),new Error(`Circular dependency: ${Z.map(n=>`${n.name}`).join(" -> ")}`);Z.push(e);const t=ee.get(e)||ee.set(e,new e).get(e);return Z.pop(),t};class sr extends HTMLElement{constructor(){super(),this.B=ke(),this.x=[],this.C=[],this.S=[];let t=this.children,n=t[0];if(n.nodeName==="TEMPLATE")this.C=Array.from(n.content.children);else for(;t.length>0;){const r=t[0];this.C.push(r),this.B.append(r)}}connectedCallback(){this.A(T,"popstate",this._),this.A(k.body,"click",this.U),this.O(T.location.pathname),this.M(T.history,"pushState",this.R),this.M(T.history,"replaceState",this.R)}disconnectedCallback(){for(;this.S.length;)this.S.pop()()}go(t){T.history.pushState(null,"",t)}H(t){let n=!1;if(t.e!==this.x[0]){const o=Q(t.e,"title"),i=Q(t.e,"component");this.innerHTML="",o&&(k.title=o),this.x=[t.e,i?jt(i):gt(t.e)],n=!0}const r=this.x[1];for(const[o,i]of t.g)$(r,vt(o),i);n&&this.append(r)}U(t){if(!t.defaultPrevented){const n=t.composedPath().filter(r=>r.tagName==="A")[0];n&&n.href&&n.origin===T.location.origin&&!n.href.startsWith("blob:")&&(t.preventDefault(),this.go(`${n.pathname}${n.search}${n.hash}`))}}A(t,n,r){const o=r.bind(this);t.addEventListener(n,o),this.S.push(()=>t.removeEventListener(n,o))}V(t){for(const n of this.C){const r=Q(n,"path")||"**",o=Q(n,"regexp");let i=r;Oe(o)||(i=r.replace(/\*+/g,c=>c.length>1?".*":"[^/]*").replace(/:[^:\/]+/g,c=>`(?<${c.slice(1)}>[^/]+)`));const s=new RegExp(`^${i}(/.*)?$`),a=t.match(s);if(a)return{e:n,g:Object.entries(a.groups||{})}}return null}R(t,n){return(r,o,i)=>{n.call(t,r,o,i),this.O(i||"/")}}M(t,n,r){const o=t[n];t[n]=r.call(this,t,o),this.S.push(()=>t[n]=o)}_(){this.O(T.location.pathname)}O(t){const n=this.V(t);n&&this.H(n),Cn(k.body,"routeChange",t)}}const ar=(e="router-outlet")=>{customElements.define(e,sr)},v=(e,...t)=>String.raw({raw:e},...t),C=v;I("app-about",{style:C`:host{box-sizing:border-box;display:block;padding:.5em;width:100%}`,template:v`<page-title id="about.title"></page-title><i18n-html id="about.html"></i18n-html><i18n-label id="about.buildInformation"></i18n-label><ul><li>{{buildDate}}</li><li><a href="https://github.com/fidian/revvia/commit/{{version}}" target="_blank">{{shortVersion}}</a></li><li>Node.js {{nodeVersion}} ({{hostPlatform}} {{hostArch}})</li></ul>`},class{constructor(){this.buildDate="2025-05-15T00:37:08.135Z",this.hostPlatform="linux",this.hostArch="x64",this.nodeVersion="v20.19.1",this.shortVersion="15d66116a185f4788566632a061a5edfb278a8a1".substr(0,7),this.version="15d66116a185f4788566632a061a5edfb278a8a1",this.website="https://revvia.js/"}});var Lt=function(e,t){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Lt(e,t)};function J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function cr(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(m){s(m)}}function c(u){try{l(r.throw(u))}catch(m){s(m)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function $e(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function W(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function Mt(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function G(e){return this instanceof G?(this.v=e,this):new G(e)}function lr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(d){return function(f){return Promise.resolve(f).then(d,m)}}function a(d,f){r[d]&&(o[d]=function(b){return new Promise(function(_,x){i.push([d,b,_,x])>1||c(d,b)})},f&&(o[d]=f(o[d])))}function c(d,f){try{l(r[d](f))}catch(b){h(i[0][3],b)}}function l(d){d.value instanceof G?Promise.resolve(d.value.v).then(u,m):h(i[0][2],d)}function u(d){c("next",d)}function m(d){c("throw",d)}function h(d,f){d(f),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ur(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof W=="function"?W(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}function y(e){return typeof e=="function"}function Be(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ot=Be(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Rt(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var wt=function(){function e(t){this.initialTeardown=t,this.closed=!1,this.u=null,this.y=null}return e.prototype.unsubscribe=function(){var t,n,r,o,i;if(!this.closed){this.closed=!0;var s=this.u;if(s)if(this.u=null,Array.isArray(s))try{for(var a=W(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(b){t={error:b}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(y(u))try{u()}catch(b){i=b instanceof Ot?b.errors:[b]}var m=this.y;if(m){this.y=null;try{for(var h=W(m),d=h.next();!d.done;d=h.next()){var f=d.value;try{ne(f)}catch(b){i=i!=null?i:[],b instanceof Ot?i=Mt(Mt([],At(i)),At(b.errors)):i.push(b)}}}catch(b){r={error:b}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}if(i)throw new Ot(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ne(t);else{if(t instanceof e){if(t.closed||t.G(this))return;t.W(this)}(this.y=(n=this.y)!==null&&n!==void 0?n:[]).push(t)}},e.prototype.G=function(t){var n=this.u;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype.W=function(t){var n=this.u;this.u=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype.F=function(t){var n=this.u;n===t?this.u=null:Array.isArray(n)&&Rt(n,t)},e.prototype.remove=function(t){var n=this.y;n&&Rt(n,t),t instanceof e&&t.F(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),je=wt.EMPTY;function _e(e){return e instanceof wt||e&&"closed"in e&&y(e.remove)&&y(e.add)&&y(e.unsubscribe)}function ne(e){y(e)?e():e.unsubscribe()}var hr={Promise:void 0},dr={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Mt([e,t],At(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Ue(e){dr.setTimeout(function(){throw e})}function $t(){}function ht(e){e()}var Wt=function(e){J(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,_e(n)&&n.add(r)):r.destination=mr,r}return t.create=function(n,r,o){return new Bt(n,r,o)},t.prototype.next=function(n){this.isStopped||this.P(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this.I(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.T())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype.P=function(n){this.destination.next(n)},t.prototype.I=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype.T=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(wt),pr=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){ct(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){ct(r)}else ct(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){ct(n)}},e}(),Bt=function(e){J(t,e);function t(n,r,o){var i=e.call(this)||this,s;return y(n)||!n?s={next:n!=null?n:void 0,error:r!=null?r:void 0,complete:o!=null?o:void 0}:s=n,i.destination=new pr(s),i}return t}(Wt);function ct(e){Ue(e)}function fr(e){throw e}var mr={closed:!0,next:$t,error:fr,complete:$t},Ft=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function He(e){return e}function br(e){return e.length===0?He:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var P=function(){function e(t){t&&(this.p=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,i=gr(t)?t:new Bt(t,n,r);return ht(function(){var s=o,a=s.operator,c=s.source;i.add(a?a.call(i,c):c?o.p(i):o.N(i))}),i},e.prototype.N=function(t){try{return this.p(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=re(n),new n(function(o,i){var s=new Bt({next:function(a){try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});r.subscribe(s)})},e.prototype.p=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Ft]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return br(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=re(t),new t(function(r,o){var i;n.subscribe(function(s){return i=s},function(s){return o(s)},function(){return r(i)})})},e.create=function(t){return new e(t)},e}();function re(e){var t;return(t=e!=null?e:hr.Promise)!==null&&t!==void 0?t:Promise}function vr(e){return e&&y(e.next)&&y(e.error)&&y(e.complete)}function gr(e){return e&&e instanceof Wt||vr(e)&&_e(e)}function wr(e){return y(e==null?void 0:e.lift)}function K(e){return function(t){if(wr(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F(e,t,n,r,o){return new yr(e,t,n,r,o)}var yr=function(e){J(t,e);function t(n,r,o,i,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c.P=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype.P,c.I=i?function(l){try{i(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype.I,c.T=o?function(){try{o()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype.T,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Wt),Sr=Be(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),j=function(e){J(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new oe(this,this);return r.operator=n,r},t.prototype.w=function(){if(this.closed)throw new Sr},t.prototype.next=function(n){var r=this;ht(function(){var o,i;if(r.w(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=W(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var r=this;ht(function(){if(r.w(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var o=r.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;ht(function(){if(n.w(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype.N=function(n){return this.w(),e.prototype.N.call(this,n)},t.prototype.p=function(n){return this.w(),this.z(n),this.q(n)},t.prototype.q=function(n){var r=this,o=this,i=o.hasError,s=o.isStopped,a=o.observers;return i||s?je:(this.currentObservers=null,a.push(n),new wt(function(){r.currentObservers=null,Rt(a,n)}))},t.prototype.z=function(n){var r=this,o=r.hasError,i=r.thrownError,s=r.isStopped;o?n.error(i):s&&n.complete()},t.prototype.asObservable=function(){var n=new P;return n.source=this,n},t.create=function(n,r){return new oe(n,r)},t}(P),oe=function(e){J(t,e);function t(n,r){var o=e.call(this)||this;return o.destination=n,o.source=r,o}return t.prototype.next=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)},t.prototype.error=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype.p=function(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:je},t}(j),zt=function(e){J(t,e);function t(n){var r=e.call(this)||this;return r.D=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype.p=function(n){var r=e.prototype.p.call(this,n);return!r.closed&&n.next(this.D),r},t.prototype.getValue=function(){var n=this,r=n.hasError,o=n.thrownError,i=n.D;if(r)throw o;return this.w(),i},t.prototype.next=function(n){e.prototype.next.call(this,this.D=n)},t}(j);function Er(e){return e&&y(e.schedule)}function xr(e){return e[e.length-1]}function Ve(e){return Er(xr(e))?e.pop():void 0}var Ge=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function We(e){return y(e==null?void 0:e.then)}function Fe(e){return y(e[Ft])}function ze(e){return Symbol.asyncIterator&&y(e==null?void 0:e[Symbol.asyncIterator])}function qe(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Cr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ye=Cr();function Je(e){return y(e==null?void 0:e[Ye])}function Ke(e){return lr(this,arguments,function(){var n,r,o,i;return $e(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,G(n.read())];case 3:return r=s.sent(),o=r.value,i=r.done,i?[4,G(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,G(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Xe(e){return y(e==null?void 0:e.getReader)}function X(e){if(e instanceof P)return e;if(e!=null){if(Fe(e))return Or(e);if(Ge(e))return kr(e);if(We(e))return Pr(e);if(ze(e))return Ze(e);if(Je(e))return Ir(e);if(Xe(e))return Tr(e)}throw qe(e)}function Or(e){return new P(function(t){var n=e[Ft]();if(y(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kr(e){return new P(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Pr(e){return new P(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Ue)})}function Ir(e){return new P(function(t){var n,r;try{for(var o=W(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function Ze(e){return new P(function(t){Nr(e,t).catch(function(n){return t.error(n)})})}function Tr(e){return Ze(Ke(e))}function Nr(e,t){var n,r,o,i;return cr(this,void 0,void 0,function(){var s,a;return $e(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=ur(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),o={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function U(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Qe(e,t){return t===void 0&&(t=0),K(function(n,r){n.subscribe(F(r,function(o){return U(r,e,function(){return r.next(o)},t)},function(){return U(r,e,function(){return r.complete()},t)},function(o){return U(r,e,function(){return r.error(o)},t)}))})}function tn(e,t){return t===void 0&&(t=0),K(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Dr(e,t){return X(e).pipe(tn(t),Qe(t))}function Lr(e,t){return X(e).pipe(tn(t),Qe(t))}function Ar(e,t){return new P(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Mr(e,t){return new P(function(n){var r;return U(n,t,function(){r=e[Ye](),U(n,t,function(){var o,i,s;try{o=r.next(),i=o.value,s=o.done}catch(a){n.error(a);return}s?n.complete():n.next(i)},0,!0)}),function(){return y(r==null?void 0:r.return)&&r.return()}})}function en(e,t){if(!e)throw new Error("Iterable cannot be null");return new P(function(n){U(n,t,function(){var r=e[Symbol.asyncIterator]();U(n,t,function(){r.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function Rr(e,t){return en(Ke(e),t)}function $r(e,t){if(e!=null){if(Fe(e))return Dr(e,t);if(Ge(e))return Ar(e,t);if(We(e))return Lr(e,t);if(ze(e))return en(e,t);if(Je(e))return Mr(e,t);if(Xe(e))return Rr(e,t)}throw qe(e)}function nn(e,t){return t?$r(e,t):X(e)}function Br(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ve(e);return nn(e,n)}function yt(e,t){return K(function(n,r){var o=0;n.subscribe(F(r,function(i){r.next(e.call(t,i,o++))}))})}function jr(e,t,n,r,o,i,s,a){var c=[],l=0,u=0,m=!1,h=function(){m&&!c.length&&!l&&t.complete()},d=function(b){return l<r?f(b):c.push(b)},f=function(b){l++;var _=!1;X(n(b,u++)).subscribe(F(t,function(x){t.next(x)},function(){_=!0},void 0,function(){if(_)try{l--;for(var x=function(){var A=c.shift();s||f(A)};c.length&&l<r;)x();h()}catch(A){t.error(A)}}))};return e.subscribe(F(t,d,function(){m=!0,h()})),function(){}}function rn(e,t,n){return n===void 0&&(n=1/0),y(t)?rn(function(r,o){return yt(function(i,s){return t(r,i,o,s)})(X(e(r,o)))},n):(typeof t=="number"&&(n=t),K(function(r,o){return jr(r,o,e,n)}))}function _r(e){return rn(He,e)}function Ur(){return _r(1)}function Hr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ur()(nn(e,Ve(e)))}function Vr(e,t){return K(function(n,r){var o=0;n.subscribe(F(r,function(i){return e.call(t,i,o++)&&r.next(i)}))})}function ie(e){return K(function(t,n){X(e).subscribe(F(n,function(){return n.complete()},$t)),!n.closed&&t.subscribe(n)})}class St{constructor(){this.b=new j,this.a=[],this.d=Date.now(),this.b.subscribe(t=>{console.log(t),this.a.push(t),this.a.length>5e3&&this.a.shift()})}log(t){const n=((Date.now()-this.d)/1e3).toFixed(3);this.b.next(`${n} ${t}`)}logSend(t){this.log(`SEND: ${this.c(t)}`)}logReceive(t){this.log(`RECV: ${this.c(t)}`)}recentLogs(){return[...this.a]}c(t){return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join(" ")}}var dt=(e=>(e.CLOSED="CLOSED",e.CONNECTED="CONNECTED",e.CONNECTING="CONNECTING",e.PENDING="PENDING",e.RECONNECTING="RECONNECTING",e))(dt||{});class on{constructor(){if(this.c=null,this.b=null,this.e=null,this.a=w(St),this.f=null,this.h=new j,this.g=Promise.resolve(),this.d=new zt("CLOSED"),!this.supported()){this.a.log("Bluetooth not supported");return}}connect(){return S(this,null,function*(){if(this.b||this.d.getValue()!=="CLOSED")throw new Error("REV_5970 Already using a Bluetooth device");this.d.next("PENDING");try{this.a.log("Requesting Bluetooth device"),this.b=yield navigator.bluetooth.requestDevice({filters:[{services:[65504]}]}),this.a.log(`Device selected: ${this.b.name}`),this.d.next("CONNECTING"),yield this.i(),this.j(),this.d.next("CONNECTED")}catch(t){throw this.a.log(`Error connecting to Bluetooth device: ${t}`),this.disconnect(),this.d.next("CLOSED"),t}})}disconnect(){return S(this,null,function*(){this.b&&(this.k(),this.b.gatt.connected?(this.a.log("Disconnecting from GATT server"),this.b.gatt.disconnect()):this.a.log("Device already disconnected"),this.c=null,this.b=null,this.d.next("CLOSED"))})}ready(){return this.d.asObservable().pipe(yt(t=>t==="CONNECTED"))}receive(){return this.h.asObservable()}sendBytes(t){return S(this,null,function*(){if(!this.c)throw new Error("REV_3159 Not connected to a device");for(let n=0;n<t.length;n+=20){const r=t.slice(n,n+20);this.g=this.g.then(()=>this.l(r))}return this.g})}state(){return this.d.asObservable()}supported(){return"bluetooth"in navigator}i(){return S(this,null,function*(){if(this.b.gatt.connected&&this.c)return this.a.log("Already connected to device"),this.c;this.a.log("Connecting to Bluetooth device"),this.m(),this.a.log("Connecting to GATT server");const t=yield this.b.gatt.connect();this.a.log("Getting service");const n=yield t.getPrimaryService(65504);this.a.log("Getting characteristic"),this.c=yield n.getCharacteristic(65505)})}k(){this.e&&(this.a.log("Removing disconnect listener"),this.b.removeEventListener("gattserverdisconnected",this.e),this.e=null)}n(){this.f&&(this.a.log("Removing notifications listener"),this.c.removeEventListener("characteristicvaluechanged",this.f),this.f=null)}l(t){if(!this.c)throw new Error("REV_8291 Incomplete send - no longer connected");return this.c.writeValue(t)}m(){this.a.log("Setting up disconnect listener"),this.e=()=>S(this,null,function*(){try{this.a.log("Bluetooth device disconnected, trying to reconnect"),this.d.next("RECONNECTING"),yield this.i(),this.j(),this.d.next("CONNECTED")}catch(t){this.a.log(`Error reconnecting to Bluetooth device: ${t}`),this.disconnect()}}),this.b.addEventListener("gattserverdisconnected",this.e)}j(){this.n(),this.a.log("Starting notifications"),this.c.startNotifications(),this.a.log("Setting up notifications listener");const t=n=>{const r=n.target.getValue();if(r){const o=new Uint8Array(r.buffer);this.h.next(o)}};this.c.addEventListener("characteristicvaluechanged",t)}}const Gr=Date.now();class Wr{constructor(){this.b=null,this.e=w(St),this.d=[],this.a=[],this.f=new zt("CLOSED"),this.h=new j}close(){if(!this.b)throw new Error("REV_7636 Interface already closed");this.b.disconnect()}listen(){return this.h.asObservable()}logs(){return[...this.d]}open(t){if(this.b)throw new Error("REV_1140 Interface already open");this.b=t;const n=t.ready().subscribe(r=>{r?(t.receive().subscribe(o=>this.g(o)),this.f.next("OPEN")):(this.f.next("CLOSED"),n.unsubscribe(),this.k(),this.b===t&&(this.b=null))})}sendMessage(t){if(!this.b)throw new Error("REV_9082 Interface not open");if(t.length!==20)throw new Error("REV_2548 Message must be 20 bytes");const n=new Uint8Array(24);n[0]=201,n[1]=20,n.set(t,2);let r=0;for(let o=0;o<22;o+=1)r^=n[o];n[22]=r,n[23]=13,this.i("SEND",n),this.j("SEND",n),this.b.sendBytes(n)}state(){return this.f.asObservable()}c(t){return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join(" ")}k(){this.a.length=0}i(t,n){this.e.log(`${t}: ${this.c(n)}`)}j(t,n){for(this.d.push(`${Date.now()-Gr},${t},${this.c(n)}`);this.d.length>5e3;)this.d.shift()}l(t){if(t[1]!==20)return"Length mismatch";if(t[23]!==13)return"End byte mismatch";let n=0;for(let r=0;r<22;r+=1)n^=t[r];return n!==t[22]?`Checksum ${this.c([n])} mismatch`:!1}g(t){this.i("RECV",t),this.a.push(...t);const n=[];for(;this.a.length&&this.a[0]!==192;)n.push(this.a.shift());for(n.length&&this.e.log(`Discarding bytes: ${this.c(n)}`);this.a.length>=24;){const r=this.a.slice(0,24),o=this.l(r);if(o)return this.e.log(`Skipping only first byte - ${o}: ${this.c(this.a.slice(0,24))}`),this.a.shift(),this.g([]);this.a.splice(0,24),this.m(r)}if(this.a.length)return this.g([])}m(t){this.j("RECV",t);const n=t.slice(2,20);this.h.next(n)}}var pt=(e=>(e.CLOSED="CLOSED",e.CONNECTED="CONNECTED",e.OPEN="OPEN",e.PENDING="PENDING",e))(pt||{});class sn{constructor(){this.a=w(St),this.b=null,this.f=new j,this.e=Promise.resolve(),this.c=new zt("CLOSED"),this.d=null,this.supported()?(navigator.serial.addEventListener("connect",()=>{this.a.log("Serial port connected"),this.c.next("CONNECTED")}),navigator.serial.addEventListener("disconnect",()=>{this.a.log("Serial port disconnected"),this.c.next("OPEN")})):this.a.log("Serial not supported")}connect(){return S(this,null,function*(){if(this.b||this.c.getValue()!=="CLOSED")throw new Error("REV_8514 Already using a serial port");this.c.next("PENDING");try{this.a.log("Requesting serial port");const t=yield navigator.serial.requestPort();if(this.a.log("Opening serial port"),yield t.open({baudRate:115200}),this.a.log("Serial port opened"),!t.writable){this.a.log("Port is not writable");return}this.b=t,this.g(t),this.h(t)}catch(t){throw this.a.log(`Error connecting to serial port: ${t}`),this.disconnect(),t}})}disconnect(){return S(this,null,function*(){this.b&&(this.d&&(this.a.log("Releasing writer lock"),this.d.releaseLock(),this.d=null),this.a.log("Closing serial port"),yield this.b.close(),this.b=null),this.c.next("CLOSED")})}ready(){return this.c.asObservable().pipe(yt(t=>t==="OPEN"))}receive(){return this.f.asObservable()}sendBytes(t){return S(this,null,function*(){var n;if(!((n=this.b)!=null&&n.writable)){this.a.log("Serial port is not open");return}return this.e=this.e.then(()=>this.i(t)),this.e})}state(){return this.c.asObservable()}supported(){return"serial"in navigator}i(t){return S(this,null,function*(){if(!this.d)throw new Error("REV_8446 Writer is not available");yield this.d.write(t)})}g(t){return S(this,null,function*(){for(this.a.log("Setting up reader");this.b===t&&t.readable;){const n=t.readable.getReader();try{for(;this.b===t;){const{value:r,done:o}=yield n.read();if(o)break;this.f.next(r)}}catch(r){console.error("Error reading from port:",r)}finally{n.releaseLock()}}})}h(t){return S(this,null,function*(){if(this.a.log("Setting up writer"),!t.writable)throw new Error("REV_4072 Port is not writable");if(this.d){this.a.log("Writer already exists");return}this.d=t.writable.getWriter()})}}var Fr=Object.getOwnPropertyDescriptor,zr=(e,t,n,r)=>{for(var o=r>1?void 0:r?Fr(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let se=class{constructor(){this.BluetoothState=dt,this.bluetoothState=dt.CLOSED,this.bluetoothSupported=!1,this.SerialState=pt,this.serialState=pt.CLOSED,this.serialSupported=!1,this.showConnect=!0,this.a=w(on),this.b=w(St),this.e=w(Wr),this.c=w(sn),this.d=new j,this.bluetoothSupported=this.a.supported(),this.a.state().pipe(ie(this.d)).subscribe(e=>{this.bluetoothState=e,this.f()}),this.serialSupported=this.c.supported(),this.c.state().pipe(ie(this.d)).subscribe(e=>{this.serialState=e,this.f()})}onDestroy(){this.d.next(),this.d.complete()}bluetoothConnect(){return S(this,null,function*(){this.showConnect=!1;try{yield this.a.connect(),this.b.log("Connected to Bluetooth"),this.e.open(this.a)}catch(e){this.showConnect=!0,this.b.log(`Failed to connect to Bluetooth: ${e}`)}})}bluetoothDisconnect(){this.a.disconnect(),this.b.log("Manually disconnected from Bluetooth")}serialConnect(){return S(this,null,function*(){this.showConnect=!1;try{yield this.c.connect(),this.b.log("Connected to serial port"),this.e.open(this.a)}catch(e){this.showConnect=!0,this.b.log(`Failed to connect to serial port: ${e}`)}})}serialDisconnect(){this.c.disconnect(),this.b.log("Manually disconnected from serial port")}f(){this.showConnect=this.bluetoothState===dt.CLOSED&&this.serialState===pt.CLOSED}};se=zr([B("app-connect",{style:C`:host{box-sizing:border-box;display:block;height:100%;max-height:100%;overflow:auto;padding:.5em}.option{display:flex;gap:1em;margin-bottom:1em}.option img{max-width:20%;width:8em;overflow:hidden;box-sizing:border-box;object-fit:contain;flex:none}.centered{display:flex;justify-content:center;align-items:center;height:100%}.state{font-size:2rem}`,template:v`<page-title id="connect.title"></page-title><div *if="showConnect"><p><i18n-label id="connect.selectConnection"></i18n-label></p><div class="option"><img src="/votol-bluetooth-serial.png" #i18n-alt="connect.bluetoothImageAlt"><div><button @click="bluetoothConnect()"><i18n-label id="connect.bluetoothConnect"></i18n-label></button><div class="unsupported" *if="!bluetoothSupported"><i18n-label id="connect.bluetoothUnsupported"></i18n-label></div><i18n-html id="connect.bluetoothDescriptionHtml"></i18n-html></div></div><div class="option"><img src="/votol-usb-serial-can.png" #i18n-alt="connect.serialImageAlt"><div><button *if="serialSupported" @click="serialConnect()"><i18n-label id="connect.serialConnect"></i18n-label></button><div class="unsupported" *if="!serialSupported"><i18n-label id="connect.serialUnsupported"></i18n-label></div><i18n-html id="connect.serialDescriptionHtml"></i18n-html></div></div><div class="option"><img src="/votol-usb-serial-black.png" #i18n-alt="connect.oldBlackSerialImageAlt"><div><i18n-html id="connect.oldBlackSerialDescriptionHtml"></i18n-html></div></div><div class="option"><img src="/votol-usb-serial-blue.png" #i18n-alt="connect.oldBlueSerialImageAlt"><div><i18n-html id="connect.oldBlueSerialDescriptionHtml"></i18n-html></div></div></div><div *if="bluetoothState !== BluetoothState.CLOSED" class="centered"><i18n-label class="state" id="connect.bluetoothState.{{bluetoothState}}"></i18n-label><connection-operations *if="bluetoothState === BluetoothState.CONNECTED"></connection-operations></div><div *if="serialState !== SerialState.CLOSED" class="centered"><i18n-label class="state" id="connect.serialState.{{serialState}}"></i18n-label><connection-operations *if="serialState === SerialState.CONNECTED"></connection-operations></div>`})],se);I("app-redirect",{template:""},class{constructor(){setTimeout(()=>{history.pushState({},document.title,"/connect")})}});const an="termsAccepted";class cn{constructor(){this.a=new j}observe(t){let n=sessionStorage.getItem(t);try{n=JSON.parse(n!=null?n:"")}catch(r){n=null}return Hr(Br(n),this.a.asObservable().pipe(Vr(r=>r.key===t),yt(r=>r.newValue)))}set(t,n){sessionStorage.setItem(t,JSON.stringify(n)),this.a.next({key:t,newValue:n})}}I("app-root",{style:C`:host{display:flex;flex-direction:column;max-height:100%;height:100%;width:100%}header{flex:none;background-color:var(--active-background-color);display:flex;justify-content:center;align-items:center}.title{font-size:1.6em}color-scheme{position:absolute;top:0;right:0}app-welcome{flex-grow:1;flex-shrink:1;overflow:hidden}.content{flex:1;overflow:hidden;display:flex;width:100%}.menu{width:var(--menu-width);flex:none}@media (max-width:600px){.extended{display:none}.menu{display:none}}app-router{flex-grow:1}`,template:v`<header><span class="title" title="{{hover}}">Revvia<span class="extended"> - Votol Controller Programmer</span></span><color-scheme></color-scheme></header><app-welcome *if="!termsAccepted"></app-welcome><div class="content" *if="termsAccepted"><menu-items class="menu"></menu-items><app-router><div path="/about" component="app-about"></div><div path="/connect" component="app-connect"></div><div path="/settings" component="app-settings"></div><div path="**" component="app-redirect"></div></app-router></div><flyout-menu></flyout-menu>`},class{constructor(){this.hover="",this.termsAccepted=!1,this.a=w(cn);const e=[];e.push(`Last Update: ${"2025-05-15T00:37:08.135Z".substr(0,16).replace("T"," ")}`),this.hover=e.join(`
`),this.a.observe(an).subscribe(t=>{this.termsAccepted=!!t})}});I("app-settings",{style:C`:host{box-sizing:border-box;display:block;padding:.5em;width:100%}.option{display:flex;align-items:top;gap:1em}.setting{width:100px;flex-shrink:0}.description{flex:1}`,template:v`<page-title id="settings.title"></page-title><div class="option"><div class="setting"><color-scheme></color-scheme></div><div class="description"><i18n-label id="settings.colorScheme"></i18n-label></div></div>`});var qr=Object.getOwnPropertyDescriptor,Yr=(e,t,n,r)=>{for(var o=r>1?void 0:r?qr(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let ae=class{constructor(){this.supported=!1,this.supportsBluetooth=!1,this.supportsSerial=!1,this.a=w(on),this.b=w(sn),this.c=w(cn),this.supportsBluetooth=this.a.supported(),this.supportsSerial=this.b.supported(),this.supported=this.supportsBluetooth||this.supportsSerial}accept(){this.c.set(an,!0)}};ae=Yr([B("app-welcome",{style:C`:host{display:flex;flex-direction:column;max-height:100%;height:100%}.fit{flex-grow:1;flex-shrink:1;overflow:auto;padding:1rem;margin:1rem;border:2px solid var(--active-background-color);border-radius:.5rem}h1{margin-top:0}.accept{font-size:2rem;display:flex;align-items:center;flex-direction:column;flex:none;margin:0 1rem 1rem 1rem}button{font:inherit;border-radius:.5rem;box-sizing:border-box}.supported,.unsupported{font-size:1.5rem;font-weight:700;padding:1rem;border-radius:.5rem}.supported{background-color:#00af00}.unsupported{background-color:red}`,template:v`<div class="fit"><h1><i18n-label id="welcome.title"></i18n-label></h1><i18n-html id="welcome.overviewHtml"></i18n-html><p><check-or-x checked="{{supportsBluetooth}}"></check-or-x><i18n-label id="welcome.supportsBluetooth"></i18n-label><br><check-or-x checked="{{supportsSerial}}"></check-or-x><i18n-label id="welcome.supportsSerial"></i18n-label></p><p *if="supported" class="supported"><i18n-label id="welcome.browserSupported"></i18n-label></p><p *if="!supported" class="unsupported"><i18n-label id="welcome.browserUnsupported"></i18n-label></p><i18n-html id="welcome.pleaseHelpHtml"></i18n-html><i18n-html id="welcome.termsOfUseHtml"></i18n-html></div><div class="accept"><button disabled="{{!supported}}" @click="accept()"><i18n-label id="welcome.acceptTerms"></i18n-label></button></div><div></div>`})],ae);I("check-or-x",{attr:["checked"],style:C`:host{display:inline-flex;width:1em;height:1em;text-align:center;justify-content:center;align-items:center;font-size:1.5em;font-weight:700}.checkmark{color:green}.xmark{color:red}`,template:v`<span *if="checkedValue" class="checkmark">✓</span> <span *if="!checkedValue" class="xmark">✖</span>`},class{constructor(){this.checkedValue=!1}onChange(e){e==="checked"&&(this.checkedValue=typeof this.checked=="string")}});var z=(e=>(e.DARK="DARK",e.LIGHT="LIGHT",e))(z||{}),ln=(e=>(e.IMPERIAL="IMPERIAL",e.METRIC="METRIC",e))(ln||{});class kt{static boolean(t,n=1){return{getItem:()=>this.a(t,n,r=>typeof r=="boolean"),reset:()=>localStorage.removeItem(t),setItem:r=>this.b(t,r,n)}}static enum(t,n,r=1){return this.list(t,[...Object.values(n)],r)}static json(t,n=1,r){return{getItem:()=>this.a(t,n,r),reset:()=>localStorage.removeItem(t),setItem:o=>this.b(t,o,n)}}static list(t,n,r=1){return{getItem:()=>{const o=this.a(t,r,i=>n.includes(i));return n.includes(o)?o:null},reset:()=>localStorage.removeItem(t),setItem:o=>n.includes(o)?this.b(t,o,r):localStorage.removeItem(t)}}static number(t,n=1){return{getItem:()=>this.a(t,n,r=>typeof r=="number"),reset:()=>localStorage.removeItem(t),setItem:r=>this.b(t,r,n)}}static string(t,n=1){return{getItem:()=>this.a(t,n,r=>typeof r=="string"),reset:()=>localStorage.removeItem(t),setItem:r=>this.b(t,r,n)}}static a(t,n,r){const o=localStorage.getItem(t);if(!o)return null;try{const i=JSON.parse(o);if(i[0]===n&&r(i[1]))return i[1]}catch(i){}return null}static b(t,n,r){try{localStorage.setItem(t,JSON.stringify([r,n]))}catch(o){localStorage.clear()}}}class un{constructor(){const t=kt.number("preferenceVersion");t.getItem()!==1&&t.setItem(1),this.distanceSystem=kt.enum("distanceSystem",ln),this.lightDarkMode=kt.enum("lightDarkMode",z)}}I("color-scheme",{style:C`@media (prefers-color-scheme:light){.light{display:none}}@media (prefers-color-scheme:dark){.dark{display:none}}`,template:v`<button *if="isAuto" class="light toggle" @click="light()"><i18n-label id="colorScheme.light"></i18n-label></button> <button *if="!isAuto" class="auto toggle" @click="auto()"><i18n-label id="colorScheme.auto"></i18n-label></button> <button *if="isAuto" class="dark toggle" @click="dark()"><i18n-label id="colorScheme.dark"></i18n-label></button>`},class{constructor(){this.isAuto=!0,this.b=null,this.c=w(un),this.a()}onViewInit(){this.b=new MutationObserver(()=>{this.a()}),this.b.observe(document.body,{attributes:!0,attributeFilter:["class"]})}onDestroy(){var e;(e=this.b)==null||e.disconnect(),this.b=null}auto(){this.c.lightDarkMode.reset(),document.body.classList.remove("dark"),document.body.classList.remove("light"),this.a()}light(){this.c.lightDarkMode.setItem(z.LIGHT),document.body.classList.remove("dark"),document.body.classList.add("light"),this.a()}dark(){this.c.lightDarkMode.setItem(z.DARK),document.body.classList.remove("light"),document.body.classList.add("dark"),this.a()}a(){this.isAuto=!document.body.classList.contains("dark")&&!document.body.classList.contains("light")}});I("flyout-menu",{style:C`:host{background:var(--menu-bg-color);color:var(--fg-color);display:none;left:calc(-1 * var(--menu-width) - var(--menu-handle-size));padding:8px;position:fixed;top:0;transition:left .5s;transition-timing-function:ease-in-out;width:calc(var(--menu-width) + var(--menu-handle-size));border-right:var(--menu-border);border-bottom:var(--menu-border);box-sizing:border-box}:host.open{left:0}.toggle{background:var(--menu-bg-color);border-bottom:var(--menu-border);border-right:var(--menu-border);display:block;left:100%;padding:8px;position:absolute;top:0}svg{fill:var(--fg-color);width:var(--menu-handle-size);height:var(--menu-handle-size)}@media (max-width:600px){:host{display:block}}`,template:v`<a href="#" class="toggle" @click.stop.prevent="toggle()"><svg viewBox="0 0 100 100"><rect x="5" y="14" width="90" height="16" rx="10"></rect><rect x="5" y="42" width="90" height="16" rx="10"></rect><rect x="5" y="70" width="90" height="16" rx="10"></rect></svg></a><menu-items class="menu"></menu-items>`},class{constructor(){this.a=()=>this.b()}onInit(){document.body.addEventListener("routeChange",this.a)}onDestroy(){document.body.removeEventListener("routeChange",this.a)}toggle(){var e;(e=Nt(this))==null||e.classList.toggle("open")}b(){var e;(e=Nt(this))==null||e.classList.remove("open")}});const Pt={"about.buildInformation":"Build information:","about.html":v`<p>Revvia is an open-source, web-based app for programming Votol controllers. Built as a Progressive Web App (PWA), it can used with or without installing as a standalone app. Once loaded, it works offline as well.</p><p>Have a suggestion, bug report, or other way that this software can be better? Go to the project page on <a href="https://github.com/fidian/revvia/">GitHub</a> and create an issue. You can also contact the author directly <a href="mailto:fidian@rumkin.com">through email</a>.</p>`,"about.title":"About","app.title":"Revvia","connect.bluetoothConnect":"Connect to Bluetooth Serial Port","connect.bluetoothDescriptionHtml":v`<ul><li>Requires the Bluetooth adapter, which can come in a black or a white case.</li><li>Should work with EM50-4, EM80GTSP (with CAN), EM100SP, EM150-2SP, EM200-2SP, EM260SP, SV120 (with CAN).</li></ul>`,"connect.bluetoothImageAlt":"Bluetooth Serial Adapter","connect.bluetoothState.CONNECTED":"Bluetooth Connected","connect.bluetoothState.CONNECTING":"Bluetooth Connecting ...","connect.bluetoothState.RECONNECTING":"Bluetooth Reconnecting ...","connect.bluetoothState.PENDING":"Bluetooth Request Pending ...","connect.bluetoothUnsupported":"Unsupported","connect.oldBlackSerialDescriptionHtml":v`<p>Unsupported controllers because they require the older serial adapter that's coated in black tape. Support for this cable could be added in the future, or it might work right now as-is. This cable should support CAN.</p><ul><li>EM50 (EM50S), EM100, EM100-4P, EM150 (EM150SP), EM200 (EM200SP).</li></ul>`,"connect.oldBlackSerialImageAlt":"USB to Serial Adapter (Black)","connect.oldBlueSerialDescriptionHtml":v`<p>Unsupported controllers that use the blue USB to serial adapter, which does not support CAN bus. These could also be added in the future.</p><ul><li>EM25P, EM30SP, EM50SP LIN, EM50-4 (without CAN), EM50-6, EM80GTSP (without CAN), SV120 (without CAN).</li></ul>`,"connect.oldBlueSerialImageAlt":"USB to Serial Adapter (Blue)","connect.selectConnection":"Select the type of connection you want to use:","connect.serialConnect":"Connect to Serial Port (CAN)","connect.serialDescriptionHtml":v`<ul><li>Requires the USB to CAN adapter. It is translucent blue with a band of black electrical tape.</li><li>Confirmed with EM200-2SP.</li><li>Should work with EM50-4, EM80GTSP (with CAN), EM100SP, EM150-2SP, EM260SP, SV120 (with CAN).</li></ul>`,"connect.serialImageAlt":"USB to CAN Adapter","connect.serialState.CONNECTED":"Serial Connected","connect.serialState.OPEN":"Serial Open ...","connect.serialState.PENDING":"Serial Request Pending ...","connect.serialUnsupported":"Unsupported","connect.title":"Connection","colorScheme.auto":"System Colors","colorScheme.dark":"Dark Mode","colorScheme.light":"Light Mode","installPwa.action":"Install","installPwa.message":"Install to Home Screen","menu.about":"About","menu.connect":"Connection","menu.settings":"Settings","shared.permissionDenied.heading":"Denied or Unavailable","shared.permissionDenied.message":"Because the necessary permission was denied or the hardware is unavailable, the button in the menu will be removed.","shared.permissionError.heading":"Error","shared.permissionError.message":"There was an error obtaining the necessary permission or information. Perhaps the device is already in use. This may be temporary.","shared.permissionPrompt.goBack":"Not Right Now","shared.permissionPrompt.grantPermission":"Grant Permission","shared.permissionPrompt.heading":"Permission Required","shared.prettyInput.close":"Close Help","settings.colorScheme":"Toggle between light and dark mode. The system's color scheme is detected and used as the default, but can be overridden here.","settings.title":"Settings","service.wakeLock.released":"Letting Screen Turn Off","service.wakeLock.obtained":"Keeping Screen On","updatePwa.message":"Update Available!","updatePwa.reload":"Reload Now","updatePwa.skip":"Next Launch","welcome.acceptTerms":"I Agree To These Terms","welcome.browserSupported":"Revvia supports this browser.","welcome.browserUnsupported":"Revvia is not supported on this browser.","welcome.overviewHtml":v`<p>This is a web-based Votol controller programmer. It's not sponsored nor endorsed by Votol. It's able to program Votol ES200-2SP and other CAN bus controllers. Built as a Progressive Web App (PWA), it can be installed on your computer or mobile device.</p><p>To use this, you must have Web Serial API or Web Bluetooth API support in your browser. Chrome, Edge, and Chromium-based browsers are required. You will also need an adapter cable or a Bluetooth adapter for communication to the controller.</p>`,"welcome.pleaseHelpHtml":v`<p>Please send your bug reports, feature suggestions, and improvements to the <a href="https://github.com/fidian/revvia/">GitHub page</a> or by contacting <a href="mailto:fidian@rumkin.com">the author directly</a>.</p>`,"welcome.supportsBluetooth":"Browser has Bluetooth support.","welcome.supportsSerial":"Browser has serial support.","welcome.termsOfUseHtml":v`<p>By using this software, the individual or entity ("the user") agrees to the following terms:</p><ul><li><b>GOODNESS:</b> The user agrees to perform any unprompted act of kindness for someone else, without expecting anything in return, within one week.</li><li><b>RISK:</b> This software is provided "as is", without warranties of any kind. The author and contributors are not liable for any damages or losses. Use of the software is at the user's own risk.</li><li><b>LEGALITY:</b> This software must only be used for lawful and ethical purposes. It may not be used in any jurisdiction where such use is unlawful or imposes obligations on the author or contributors.</li><li><b>SCOPE:</b> If used on behalf of an organization, company, or other legal entity, the user affirms that they have the authority to bind that entity to these terms, which shall then apply to both the individual user and the entity.</li></ul>`,"welcome.title":"Revvia"},ce={"":Pt,en:Pt,"en-US":Pt};class it{constructor(){this.a=ce.enUS}get(t){return this.a[t]||t}set(t){for(const n of[t,t.split("-")[0],""]){const r=ce[n];if(r){this.a=r;const o=document.getElementsByTagName("html")[0];o&&o.setAttribute("lang",t);const i=document.getElementsByTagName("title")[0];i&&(i.textContent=this.get("app.title"));return}}}update(t){for(const n of Object.keys(t))t[n]=this.get(n)}}const Jr=()=>{const e=w(it);Kn("#i18n-alt",(t,n,r)=>{$(n,"alt",e.get(r))})};var Kr=Object.getOwnPropertyDescriptor,Xr=(e,t,n,r)=>{for(var o=r>1?void 0:r?Kr(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let le=class{constructor(){this.a=w(it),this.id=""}onViewInit(){const e=Pn(this);e&&(e.innerHTML=this.a.get(this.id))}};le=Xr([B("i18n-html",{attr:["id"],template:""})],le);var Zr=Object.getOwnPropertyDescriptor,Qr=(e,t,n,r)=>{for(var o=r>1?void 0:r?Zr(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let ue=class{constructor(){this.a=w(it),this.id="",this.ws=" ",this.value=""}onInit(){typeof this.ws!="string"&&(this.ws=" ")}onChange(){this.value=this.a.get(this.id)}};ue=Qr([B("i18n-label",{attr:["id","ws"],template:v`{{ws}}{{value}}{{ws}}`})],ue);I("menu-item",{attr:["href","id"],prop:["active"],style:C`:host{box-sizing:border-box;display:block;padding:.25em;user-select:none}a{border-radius:.5em;display:block;font-size:1.2em;padding:.25em .5em}a:hover{background-color:var(--hover-background-color)}.active{background-color:var(--active-background-color)}`,template:v`<a href="{{href}}" class="{{classList}}"><i18n-label id="{{id}}"></i18n-label></a>`},class{constructor(){this.active=!1,this.classList=""}onChange(e){e==="active"&&(this.classList=this.active?"active":"")}});I("menu-items",{style:C`:host{background-color:var(--menu-bg-color)}`,template:v`<menu-item *for="item of items" id="{{item.id}}" href="{{item.href}}" .active="item.active"></menu-item>`},class{constructor(){this.items=[{id:"menu.connect",href:"/connect",active:!1},{id:"menu.settings",href:"/settings",active:!1},{id:"menu.about",href:"/about",active:!1}],this.a=e=>this.b(e.detail)}onInit(){document.body.addEventListener("routeChange",this.a)}onDestroy(){document.body.removeEventListener("routeChange",this.a)}b(e){this.items=this.items.map(t=>Et(st({},t),{active:t.href===e}))}});I("page-title",{attr:["id"],style:C`h2{margin-top:0}`,template:v`<h2>{{title}}</h2>`},class{constructor(){this.a=w(it),this.id="",this.title=""}onChange(e){e==="id"&&(this.title=this.a.get(this.id))}});class hn{constructor(){this.a=null}listenForEvents(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.a=t,this.b()})}triggerSavedEvent(){this.a&&(this.a.prompt(),this.a=null)}b(){document.body.appendChild(document.createElement("install-pwa"))}}var to=Object.getOwnPropertyDescriptor,eo=(e,t,n,r)=>{for(var o=r>1?void 0:r?to(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let he=class{constructor(){this.b=w(hn)}logoLoaded(){setTimeout(()=>this.a("show"),400)}install(){this.b.triggerSavedEvent(),this.a("hide")}a(e){this.drawer&&this.drawer[e]()}};he=eo([B("install-pwa",{style:C`.load-svg-wrapper{padding:0 3%;width:5em;background-color:var(--bg-color)}.install-text{padding:0 .3em}.space{flex-grow:1}@media (max-width:60em){.load-svg-wrapper{width:4em}}@media (max-width:30em){.load-svg-wrapper{width:16%}}@media (max-width:20em){.load-svg-wrapper{width:25%}}@media (max-width:10em){.load-svg-wrapper{width:50%}}`,template:v`<bottom-drawer #ref="drawer"><div class="load-svg-wrapper"><load-svg href="/toolbox.svg" @loadsvg.stop.prevent="logoLoaded()"></load-svg></div><div class="install-text"><i18n-label id="installPwa.message"></i18n-label></div><div class="space"></div><div class="install-button"><styled-link @click.stop.prevent="install()"><i18n-label id="installPwa.action"></i18n-label></styled-link></div></bottom-drawer>`})],he);const no="modulepreload",ro=function(e){return"/"+e},de={},oo=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let s=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=s(n.map(l=>{if(l=ro(l),l in de)return;de[l]=!0;const u=l.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":no,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function io(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:i,onRegisterError:s}=e;let a,c,l;const u=(h=!0)=>S(null,null,function*(){yield c,l==null||l()});function m(){return S(this,null,function*(){if("serviceWorker"in navigator){if(a=yield oo(()=>S(null,null,function*(){const{Workbox:h}=yield import("./workbox-window.prod.es5-fJwV-9vL.js");return{Workbox:h}}),[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{s==null||s(h)}),!a)return;l=()=>{a==null||a.messageSkipWaiting()};{let h=!1;const d=()=>{h=!0,a==null||a.addEventListener("controlling",f=>{f.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",f=>{typeof f.isUpdate=="undefined"?typeof f.isExternal!="undefined"&&f.isExternal?d():!h&&(r==null||r()):f.isUpdate||r==null||r()}),a.addEventListener("waiting",d)}a.register({immediate:t}).then(h=>{i?i("/sw.js",h):o==null||o(h)}).catch(h=>{s==null||s(h)})}})}return c=m(),u}class dn{constructor(){this.a=null}listenForEvents(){window.location.hostname==="localhost"||window.location.protocol==="http:"||(this.a=io({onNeedRefresh:()=>{this.b()}}))}performUpdate(){this.a&&this.a()}b(){document.body.appendChild(document.createElement("update-pwa"))}}var so=Object.getOwnPropertyDescriptor,ao=(e,t,n,r)=>{for(var o=r>1?void 0:r?so(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let pe=class{constructor(){this.a=w(dn)}onViewInit(){this.drawer&&this.drawer.show()}reload(){this.a.performUpdate(),this.b("hide")}b(e){this.drawer&&this.drawer[e]()}};pe=ao([B("update-pwa",{style:C`.load-svg-wrapper{padding:0 3%;width:5em;background-color:var(--bg-color)}.update-text{display:flex;justify-content:center;padding:0 .3em}.space{min-width:2em;flex-grow:1}.buttons{display:flex;justify-content:space-between}.button{text-align:center}.drawer{width:100%;flex-direction:column;align-items:center;justify-content:center}`,template:v`<bottom-drawer #ref="drawer"><div class="drawer"><div class="update-text"><i18n-label id="updatePwa.message"></i18n-label></div><div class="buttons"><div class="button"><styled-link @click.stop.prevent="reload()"><i18n-label id="updatePwa.reload"></i18n-label></styled-link></div><div class="space"></div><div class="button"><styled-link @click.stop.prevent="skip()"><i18n-label id="updatePwa.skip"></i18n-label></styled-link></div></div></div></bottom-drawer>`})],pe);var co=Object.getOwnPropertyDescriptor,lo=(e,t,n,r)=>{for(var o=r>1?void 0:r?co(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let fe=Promise.resolve(),me=class{constructor(){this.c=()=>{}}onInit(){const e=this.b();e.show=()=>this.f(),e.hide=()=>this.d()}onDestroy(){this.a&&clearTimeout(this.a),this.c&&this.c()}d(){this.a&&clearTimeout(this.a),this.b().style.bottom=`-${this.e()}px`,this.a=setTimeout(()=>this.g(),2e3)}f(){fe=fe.then(()=>new Promise(e=>{this.c=e;const t=this.b().style;t.top="auto",t.bottom=`-${this.e()}px`,this.a=setTimeout(()=>{t.bottom="0",this.a=setTimeout(()=>{this.d()},15e3)},400)}))}g(){this.c(),this.b().remove()}b(){return Nt(this)}e(){const e=this.b().getBoundingClientRect();return Math.ceil(e.height+1)}};me=lo([B("bottom-drawer",{style:C`:host{top:200vh;position:fixed;display:flex;transition:bottom 1s ease-in-out 0s;left:50%;transform:translate(-50%)}.tab{border-top-left-radius:8px;border-top-right-radius:8px;border-top:2px solid;border-left:2px solid;border-right:2px solid;padding:.3em .6em;background-color:var(--button-bg-color);display:flex;align-items:center}`,template:v`<div class="tab"><slot></slot></div>`,useShadow:!0})],me);var uo=Object.getOwnPropertyDescriptor,ho=(e,t,n,r)=>{for(var o=r>1?void 0:r?uo(t,n):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(o=s(o)||o);return o};let be=class{onViewInit(){this.c(),this.d()}onDestroy(){this.b&&this.b.disconnect(),this.a&&this.a.disconnect()}c(){const e=this.wrapper,t=this.content;let n=1,r=16;const o=()=>t.style.fontSize=`${n}px`,i=e.clientWidth,s=e.clientHeight;o();const a=t.clientHeight;if(n=r,o(),t.clientHeight!==a){for(;t.clientHeight<=s;)n+=r,o();for(;r>=.1;)t.clientHeight>s||t.clientWidth>i?n-=r:(r-=r/2,n+=r),o();(t.clientHeight>s||t.clientWidth>i)&&(n-=r,o())}}d(){this.b=new ResizeObserver(()=>this.c()),this.b.observe(this.wrapper),this.a=new MutationObserver(()=>this.c()),this.a.observe(this.slot,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}};be=ho([B("grow-to-fit-font-size",{style:C`:host{box-sizing:border-box;height:100%;width:100%}.wrapper{width:100%;height:100%;display:flex;align-items:center;justify-content:center}`,template:v`<div class="wrapper" #ref="wrapper"><div #ref="content"><slot #ref="slot"></slot></div></div>`,useShadow:!0})],be);const po=()=>{Jr();const e=w(un).lightDarkMode.getItem();e===z.DARK?document.body.classList.add("dark"):e===z.LIGHT&&document.body.classList.add("light"),setTimeout(()=>{document.body.classList.add("transition")}),w(it).set(navigator.language||""),w(hn).listenForEvents(),w(dn).listenForEvents()};ar("app-router");const pn="redirect",It=sessionStorage.getItem(pn);sessionStorage.removeItem(pn);It&&It!==location.href&&history.pushState(null,null,It);const ve=()=>{po(),document.body.append(document.createElement("app-root"))},Tt="eruda";if(window.location.toString().indexOf(Tt)>=0||localStorage.getItem(Tt)){try{sessionStorage.setItem(Tt,"1")}catch(t){sessionStorage.clear()}const e=document.createElement("script");e.src="//cdn.jsdelivr.net/npm/eruda",e.onload=()=>{window.eruda.init(),ve()},document.body.append(e)}else ve();
